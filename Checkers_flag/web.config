<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <location path="." inheritInChildApplications="false">
    <system.webServer>

      <!-- ✅ Cho phép ASP.NET Core chạy trên IIS -->
      <handlers>
        <add name="aspNetCore" path="*" verb="*" modules="AspNetCoreModuleV2" resourceType="Unspecified" />
      </handlers>

      <!-- ✅ Cấu hình tiến trình ASP.NET Core -->
      <aspNetCore processPath="dotnet"
                  arguments=".\Checkers_flag.dll"
                  stdoutLogEnabled="false"
                  stdoutLogFile=".\logs\stdout"
                  hostingModel="inprocess" />

      <!-- ✅ Bỏ xác thực của IIS để không hiện hộp đăng nhập -->
      <security>
        <authentication>
          <anonymousAuthentication enabled="true" />
        </authentication>
      </security>

      <!-- ✅ Cho phép nén và tắt cache -->
      <urlCompression doStaticCompression="true" doDynamicCompression="true" />
      <staticContent>
        <clientCache cacheControlMode="DisableCache" />
      </staticContent>

      <directoryBrowse enabled="false" />
    </system.webServer>
  </location>

  <system.web>
    <!-- Không cần xác thực ASP.NET cũ -->
    <authentication mode="None" />
    <authorization>
      <allow users="*" />
    </authorization>

    <!-- Cho phép session và hiển thị lỗi -->
    <sessionState mode="InProc" timeout="30" />
    <customErrors mode="Off" />
  </system.web>
</configuration>
